<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <!-- Include Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<style>
    .btn{
        background:  #AB4F1D ;
        color:  #FDF5EA
    }
</style>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">Checkout</h2>
        <form id="checkout-form">
            <div class="mb-3">
                <label for="id" class="form-label">ID</label>
                <input type="text" class="form-control" id="id" required>
            </div>
            <div class="mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" class="form-control" id="name" required>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email address</label>
                <input type="email" class="form-control" id="email" required>
            </div>
            <div class="mb-3">
                <label for="address" class="form-label">Address</label>
                <textarea class="form-control" id="address" rows="3" required></textarea>
            </div>
            <div class="mb-3">
                <label for="phone" class="form-label">Phone</label>
                <input type="tel" class="form-control" id="phone" required>
            </div>
            <div class="mb-3">
                <label for="total_amount" class="form-label">Total Amount</label>
                <input type="number" class="form-control" id="total_amount" required>
            </div>
            <div class="mb-3">
                <label for="order_date" class="form-label">Order Date</label>
                <input type="date" class="form-control" id="order_date" required>
            </div>
            <div class="text-center">
                <img src="qrcode.jpeg" alt="QR Code" style="width: 150px; height: 150px;">
                <p>Scan for order details</p>
              </div>
            <button type="submit" class="btn">Place Order</button>
        </form>
    </div>

    <!-- Include Bootstrap JavaScript and jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function () {
                // Function to handle form submission
                $('#checkout-form').submit(function (event) {
                    event.preventDefault();
                    // Collect form data
                    const formData = {
                        name: $('#name').val(),
                        email: $('#email').val(),
                        address: $('#address').val(),
                        phone: $('#phone').val(),
                        total_amount: $('#total_amount').val() // Add total_amount field
                    };
                    // Submit form data to save_order.php using AJAX
                    $.ajax({
                        type: 'POST',
                        url: 'save_order.php', // Change to the correct path of save_order.php
                        data: formData,
                        success: function (response) {
                            alert(response); // Display success message or handle response accordingly
                            // Redirect to shopping page
                            window.location.href = 'cart.html';
                        },
                        error: function (xhr, status, error) {
                            console.error(xhr.responseText); // Log error message
                            alert('Error occurred. Please try again later.'); // Display error message
                        }
                    });
                });
            });
        </script>
</body>

</html>